<?xml version="1.0" encoding="UTF-8"?>
<CommandTranslatorRule priority="3" name="Clear Outside rule">This rule catches calls to the "clear outside" command, that erase all the image but the ROI. It applies to a given ImageProcessor.
	<Matcher class_name="ij.plugin.filter.Filler" arguments="outside" modifiers=".+" command="(&lt;command&gt;;.+)"></Matcher>
	<PythonTranslator>
# Get current ImagePlus
image = WindowManager.getCurrentImage()
# Get the current ROI
roi = image.getRoi()
# Get current ImageProcessor (i.e. the current displayed slice)
ip = image.getProcessor()
# To clear, set current color as background one (set in the ImageJ toolbar)
ip.setColor(Toolbar.getBackgroundColor())
# Erase current selection
if roi is not None:
	ip.fillOutside(roi)
# Restore foreground color
ip.setColor(Toolbar.getForegroundColor())
# Refresh display
image.updateAndDraw()
	</PythonTranslator>
</CommandTranslatorRule>
